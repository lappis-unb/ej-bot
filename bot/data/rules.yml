version: "2.0"

rules:
  - rule: User doesn't want to participate anymore
    steps:
      # This unhappy path handles the case of an intent `stop`.
      - intent: stop
      - action: utter_stopped
      - action: utter_next_conversation
      - action: utter_finish
      - active_loop: null
      - active_loop: action_restart

  - rule: Set conversation id for webchat
    steps:
      - intent: url
      - slot_was_set:
        - url
      - action: utter_welcome
      - action: utter_introduce_ej
      - action: utter_explain_how_to_participate
  - rule: Help command
    steps:
      - intent: help
      - action: utter_help

  - rule: end voting form
    condition:
        - active_loop: vote_form
    steps:
      - action: vote_form
      - active_loop: null
      - action: action_follow_up_form
      - action: utter_next_conversation
      - action: utter_finish
      - action: action_restart
