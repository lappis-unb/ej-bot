version: "3.1"

stories:

  - story: participant join conversation on webchat
    steps:
      - intent: url
      - slot_was_set:
        - url
      - action: action_introduce_ej
      - action: action_get_conversation
      - slot_was_set:
        - conversation_id
      - action: utter_show_topic_of_discussion
      - checkpoint: starts_voting

  - story: participant join conversation on telegram
    steps:
      - intent: start_with_conversation_id
      - slot_was_set:
        - conversation_id
      - action: action_set_channel_info
      - slot_was_set:
        - current_channel_info: 'telegram'
      - action: action_get_conversation
      - action: action_introduce_ej
      - action: utter_show_topic_of_discussion
      - checkpoint: starts_voting
    
  - story: participant join conversation on whatsapp
    steps:
      - intent: start_with_conversation_id
      - slot_was_set:
        - conversation_id
      - action: action_set_channel_info
      - slot_was_set:
        - current_channel_info: 'whatsapp'
      - action: action_get_conversation
      - action: action_introduce_ej
      - action: utter_show_topic_of_discussion
      - checkpoint: starts_voting

  - story: participant joins a invalid conversation
    steps:
      - checkpoint: starts_voting
      - slot_was_set:
        - conversation_id: null
      - action: utter_advise_participant_to_join_again
      - action: action_restart

  - story: starts voting form and accepts to add a new comment
    steps:
      - checkpoint: starts_voting
      - slot_was_set:
        - conversation_id
      - action: vote_form
      - active_loop: vote_form
      - slot_was_set:
        - comment_confirmation: Sim
      - action: utter_ask_comment
      - action: vote_form
      - active_loop: vote_form

  - story: starts voting form but deny adding a new comment.
    steps:
      - checkpoint: starts_voting
      - slot_was_set:
        - conversation_id
      - action: vote_form
      - active_loop: vote_form
      - slot_was_set:
        - comment_confirmation: NÃ£o
      - action: utter_go_back_to_voting
      - action: vote_form
      - active_loop: vote_form

  - story: Goodbye happy path
    steps:
      - action: utter_thanks_participation
      - action: utter_next_conversation
      - action: utter_finish
      - action: action_session_start
