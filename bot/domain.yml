version: "3.1"
config:
  store_entities_as_slots: true
session_config:
  session_expiration_time: 10
  carry_over_slots_to_new_session: true
intents:
  - want_vote:
      use_entities: []
  - check_authentication:
      use_entities: []
  - comment_confirmation:
      use_entities: []
  - agree:
      use_entities: true
  - disagree:
      use_entities: true
  - pass:
      use_entities: true
  - out_of_context:
      use_entities: true
  - stop:
      use_entities: true
  - welcome:
      use_entities: true
  - url:
      use_entities: true
  - help:
      use_entities: true
  - start_with_conversation_id:
      use_entities: true
  - add_new_comment:
      ignore_entities:
      - conversation_id
  - want_authentication:
      use_entities: true
entities:
  - url
  - current_channel_info
  - conversation_id
slots:
  comment_text:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
  refresh_token:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
  access_token:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
  conversation_id:
    type: float
    initial_value: 1.0
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: conversation_id
  conversation_statistics:
    type: any
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
  conversation_text:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
  current_comment_id:
    type: rasa.shared.core.slots.FloatSlot
    initial_value: null
    influence_conversation: false
    max_value: 1.0
    min_value: 0.0
    mappings:
    - type: custom
  number_comments:
    type: rasa.shared.core.slots.FloatSlot
    initial_value: null
    influence_conversation: false
    max_value: 1.0
    min_value: 0.0
    mappings:
    - type: custom
  user_voted_comments:
    type: rasa.shared.core.slots.FloatSlot
    initial_value: null
    influence_conversation: false
    max_value: 1.0
    min_value: 0.0
    mappings:
    - type: custom
  vote:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
      - active_loop: vote_form
        requested_slot: vote
  comment_confirmation:
    type: categorical
    values: 
      - Sim
      - N√£o
    influence_conversation: true
    mappings:
    - type: from_text
      conditions:
      - active_loop: vote_form
        requested_slot: comment_confirmation
  comment:
    type: text
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
      - active_loop: vote_form
        requested_slot: comment
  current_channel_info:
    type: text
    initial_value: null
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: current_channel_info
  url:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: url
  bot_telegram_username:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
  bot_whatsapp_number:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
  auth_link:
    type: text
    initial_value: "https://brasilparticipativo.presidencia.gov.br/users/sign_in"
    influence_conversation: false
    mappings:
    - type: custom
  user_can_vote:
    type: bool
    initial_value: False
    influence_conversation: true
    mappings:
    - type: custom
  user_is_anonymous:
    type: bool
    initial_value: null
    influence_conversation: true
    mappings:
    - type: custom
  secret_id:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
  user_reached_max_votes:
    type: bool
    initial_value: False
    influence_conversation: true
    mappings:
    - type: custom
  user_reached_max_anonymous_votes:
    type: bool
    initial_value: False
    influence_conversation: true
    mappings:
    - type: custom
  user_want_stop_vote:
    type: bool
    initial_value: False
    influence_conversation: true
    mappings:
    - type: custom
responses:
  utter_presentation:
  - text: "Ol√°, Eu sou a Duda, a assistente virtual da Plataforma Empurrando Juntas. Meu trabalho √© descobrir a opini√£o das pessoas sobre determinados temas e para isso eu preciso da sua ajuda.  A suas opini√µes ser√£o enviadas para a nossa plataforma, conforme o nosso termo de uso https://www.ejparticipe.org/usage/.\n"
  utter_show_topic:
  - text: "Eu perguntei para algumas pessoas o que elas acham sobre o seguinte assunto:\n*{conversation_text}*\n\nVou te mandar o que me responderam e gostaria da sua opini√£o:\n"
    channel: whatsapp
  - text: "Eu perguntei para algumas pessoas o que elas acham sobre o seguinte assunto:\n**{conversation_text}**\n\nVou te mandar o que me responderam e gostaria da sua opini√£o:\n"
    channel: socketio
  - text: "Eu perguntei para algumas pessoas o que elas acham sobre o seguinte assunto:\n{conversation_text}\n\nVou te mandar o que me responderam e gostaria da sua opini√£o:\n"
  utter_ask_comment_confirmation:
  - text: Gostaria de dar sua opini√£o sobre o tema para que eu possa envi√°-la aos outros participantes da coleta?
    buttons:
    - title: Sim
      payload: sim
    - title: N√£o
      payload: n√£o
  utter_ask_comment:
  - text: Pode enviar seu coment√°rio que eu anoto aqui!
  utter_go_back_to_voting:
  - text: Sem problemas, vou te mandar o que mais me responderam!
  utter_vote_received:
  - text: Anotado!
  - text: Anotei aqui.
  - text: Entendo, registrado.
  utter_out_of_context:
  - text: Desculpe, n√£o sei se entendi üòï
  utter_sent_comment:
  - text: Certo, anotei seu coment√°rio e o enviarei para outros participantes da pesquisa. Deixa eu ver se ainda tenho outras opini√µes pra te enviar.
  utter_send_comment_error:
  - text: Eu n√£o consegui salvar seu coment√°rio üòï, pois j√° existe um coment√°rio com o mesmo texto.
  utter_comment_fallback:
  - text: Desculpe, n√£o foi poss√≠vel reconhecer o coment√°rio üòï.
  utter_voted_all_comments:
  - text: Nossa üòÆüòÆüòÆ Voc√™ j√° opinou sobre todos os coment√°rios que eu tinha aqui!
  utter_thanks_participation:
  - text: Sua partici√ß√£o ir√° nos ajudar a entender o que as pessoas pensam sobre esse assunto, muito obrigado ü§óü§óü§ó!!
  utter_stopped:
  - text: S√≥ de voc√™ ter respondido ja me ajudou, muito obrigada!
  utter_next_conversation:
  - text: Depois conversamos mais üòò
  utter_finish:
  - text: Ah quando quiser trocar uma ideia √© s√≥ me mandar um "Oi".
  utter_goodbye:
  - text: Pode deixar que te mantenho por dentro sobre as novidades sobre esse assunto
  utter_ej_communication_error:
  - text: Opa, parece que n√£o estou conseguindo acessar nosso servidor.
  utter_error_try_again_later:
  - text: Tive um problema t√©cnico, por favor tente participar mais tarde.
  utter_ej_connection_doesnt_exist:
  - text: Esse site ainda n√£o est√° conectado com a EJ. Entre em contato com os administradores dele.
  utter_help:
  - text: "Se√ß√£o de ajuda de exemplo"
  utter_no_selected_conversation:
  - text: Nenhuma conversa foi selecionada. Voc√™ deve utilizar o comando de sele√ß√£o de conversa ou participar de alguma que algu√©m j√° criou.
  utter_advise_participant_to_join_again:
  - text: "N√£o consegui salvar o seu voto. Clique no link de participa√ß√£o novamente, para retomarmos nossa conversa.\n"
  utter_not_authenticated:
  - text: "N√£o consegui validar sua autentica√ß√£o. Clique no novo link para se autenticar novamente.\n"
  utter_authenticated:
  - text: "Validei sua autentica√ß√£o! üòä"
  utter_vote_limit_anonymous_reached:
  - text: "Voc√™ j√° atingiu o n√∫mero m√°ximo de votos para o assunto *{conversation_text}*.\n\nPor favor, autentique-se para continuar respondendo"
  utter_get_token:
  - text: "Aqui est√° seu link para se autenticar, ele expira em 20min:\n\n {auth_link}"
  utter_awaiting_authentication:
  - text: "Estou aguardando voc√™ se autenticar para continuar a vota√ß√£o. üòä"
  utter_user_is_authenticated:
  - text: "Voc√™ j√° est√° autenticado! üòä"
actions:
- action_ask_vote
- validate_vote_form
- action_get_conversation
- action_set_channel_info
- action_set_new_comment
- action_customized_fallback
- action_check_user_can_vote
- action_get_auth_link
- action_setup_user
- action_stop_vote
forms:
  vote_form:
    ignored_intents:
      - agree
      - disagree
    required_slots:
      - vote 
      - comment_confirmation
      - comment
e2e_actions: []
