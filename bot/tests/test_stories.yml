#### This file contains tests to evaluate that your bot behaves as expected.
#### If you want to learn more, please see the docs: https://rasa.com/docs/rasa/testing-your-assistant

stories:
- story: Greet user
  steps:
  - user: |
      oi
    intent: start
  - action: action_set_channel_info
  - action: action_get_conversation_info
  - action: utter_show_topic_of_discussion
  - action: utter_ask_user_particpate

- story: User utters out of context 
  steps:
  - user: |
      asdfgasd
    intent: out_of_context
  - action: utter_out_of_context

- story: User don't want to participate sad path
  steps:
  - user: |
      olá
    intent: start
  - action: action_set_channel_info
  - action: action_get_conversation_info
  - action: utter_show_topic_of_discussion
  - action: utter_ask_user_particpate
  - user: |
      não
    intent: disagree
  - action: utter_disagreed_participation
  - action: utter_stopped
  - action: utter_next_conversation
  - action: utter_finish
  - action: action_session_start

# - story: User agree to use phone number
#   steps:
#   - user: |
#       oi
#     intent: start
#   - action: action_set_channel_info
#   - action: action_get_conversation_info
#   - action: utter_show_topic_of_discussion
#   - action: utter_ask_user_particpate
#   - user: |
#       sim
#     intent: agree
#   - action: utter_agreed_participation
#   - action: utter_ask_phone_number
#   - action: utter_explain_ask_phone_number
#   - action: utter_phone_number_is_optional
#   - action: utter_send_phone_number
#   - user: |
#       [61995213456](phone-number)
#     intent: phone_number
#   - slot_was_set:
#     - phone-number: "61995213456"
#   - action: action_setup_conversation
#   - action: utter_stop_conversation
#   - action: vote_form
#   - active_loop: vote_form
#   - active_loop: null
#   - action: action_follow_up_form
#   - action: utter_thanks_participation
#   - action: utter_goodbye
#   - action: utter_next_conversation
#   - action: utter_finish
#   - action: action_session_start

- story: User want to participate without phone number
  steps:
  - user: |
      oi
    intent: start
  - action: action_set_channel_info
  - action: action_get_conversation_info
  - action: utter_show_topic_of_discussion
  - action: utter_ask_user_particpate
  - user: |
      sim
    intent: agree
  - action: utter_agreed_participation
  - action: utter_ask_phone_number
  - action: utter_explain_ask_phone_number
  - action: utter_phone_number_is_optional
  - action: utter_send_phone_number
  - user: |
      não
    intent: disagree
  - action: action_setup_conversation
  - action: utter_stop_conversation
  - action: vote_form
  - active_loop: vote_form
  - active_loop: null
  - action: action_follow_up_form
  - action: utter_thanks_participation
  - action: utter_goodbye
  - action: utter_next_conversation
  - action: utter_finish
  - action: action_session_start

- story: User provide invalid phone number
  steps:
  - user: |
      olá
    intent: start
  - action: action_set_channel_info
  - action: action_get_conversation_info
  - action: utter_show_topic_of_discussion
  - action: utter_ask_user_particpate
  - user: |
      sim
    intent: agree
  - action: utter_agreed_participation
  - action: utter_ask_phone_number
  - action: utter_explain_ask_phone_number
  - action: utter_phone_number_is_optional
  - action: utter_send_phone_number
  - user: |
      aaaaaa
    intent: invalid_phone_number
  - action: utter_invalid_phone_number
  - action: utter_ask_phone_number_again

- story: Start interaction with bot via webchat
  steps:
  - user: |
      [http://localhost:8000/](url)
    intent: url
  - action: utter_welcome
  - action: utter_introduce_ej
  - action: utter_explain_how_to_participate


- story: User wants help
  steps:
  - user: |
      ajuda
    intent: help
  - action: utter_help
