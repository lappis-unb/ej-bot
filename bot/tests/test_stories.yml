- story: User joins conversation to vote
  steps:
  - user: |
      ola
    intent: welcome
  - slot_was_set:
    - conversation_id
  - action: action_get_conversation
  - action: action_introduce_ej
  - action: utter_show_topic_of_discussion
  - slot_was_set:
    - conversation_id
  - action: vote_form
  - active_loop: vote_form

- story: User voted in all comments
  steps:
  - user: |
      ola
    intent: welcome
  - slot_was_set:
    - conversation_id
  - action: action_get_conversation
  - action: action_introduce_ej
  - action: utter_show_topic_of_discussion
  - slot_was_set:
    - conversation_id
  - action: vote_form
  - active_loop: vote_form
  - slot_was_set:
    - vote
  - slot_was_set:
    - comment_confirmation
  - slot_was_set:
    - comment

- story: User stoped voting
  steps:
  - user: |
      ola
    intent: welcome
  - slot_was_set:
    - conversation_id
  - action: action_get_conversation
  - action: action_introduce_ej
  - action: utter_show_topic_of_discussion
  - slot_was_set:
    - conversation_id
  - action: vote_form
  - active_loop: vote_form
  - intent: stop
  - action: action_deactivate_loop
  - active_loop: null
  - checkpoint: end_dialogue

- story: User selected a new conversation
  steps:
  - user: |
      oi
    intent: welcome
  - slot_was_set:
    - conversation_id
  - action: action_get_conversation
  - action: action_introduce_ej
  - action: utter_show_topic_of_discussion
  - slot_was_set:
    - conversation_id
  - action: vote_form
  - active_loop: vote_form
  - slot_was_set:
    - restart_conversation: true
    - ej_api_connection_error: false
    - vote: "-"
    - comment_confirmation: "-"
    - comment: "-"
    - ej_api_connection_error: false
  - active_loop: null
  - action: action_get_conversation
  - action: action_introduce_ej
  - action: utter_show_topic_of_discussion
  - checkpoint: starts_voting


- story: EJ API is unavailable
  steps:
  - user: |
      eae
    intent: welcome
  - slot_was_set:
    - conversation_id
  - action: action_get_conversation
  - action: action_introduce_ej
  - action: utter_show_topic_of_discussion
  - action: vote_form
  - active_loop: vote_form
  - slot_was_set:
    - vote: "-"
    - comment_confirmation: "-"
    - comment: "-"
    - ej_api_connection_error: true
  - active_loop: null
  - action: utter_ej_communication_error
  - action: utter_error_try_again_later
  - action: action_restart
