stories:
- story: User joins conversation to vote
  steps:
  - user: |
      ola
    intent: welcome
  - slot_was_set:
    - conversation_id
  - action: utter_show_topic_of_discussion
  - slot_was_set:
    - conversation_id
  - action: vote_form
  - active_loop: vote_form

- story: User voted in all comments
  steps:
  - user: |
      ola
    intent: welcome
  - slot_was_set:
    - conversation_id: null
  - action: action_get_conversation
  - slot_was_set:
    - conversation_id
  - action: utter_bot_introduction
  - action: utter_show_topic_of_discussion
  - slot_was_set:
    - conversation_id
  - action: vote_form
  - active_loop: vote_form
  - slot_was_set:
    - vote
  - slot_was_set:
    - comment_confirmation
  - slot_was_set:
    - comment

- story: User stop voting
  steps:
  - user: |
      ola
    intent: welcome
  - slot_was_set:
    - conversation_id: null
  - action: action_get_conversation
  - slot_was_set:
    - conversation_id
  - action: utter_bot_introduction
  - action: utter_show_topic_of_discussion
  - slot_was_set:
    - conversation_id
  - action: vote_form
  - active_loop: vote_form
  - intent: stop
  - action: utter_thanks_participation
  - action: utter_next_conversation
  - action: action_deactivate_loop
  - active_loop: null
  - action: action_restart

- story: EJ API is unavailable
  steps:
  - user: |
      eae
    intent: welcome
  - slot_was_set:
    - conversation_id: null
  - action: action_get_conversation
  - slot_was_set:
    - conversation_id
  - action: utter_bot_introduction
  - action: utter_show_topic_of_discussion
  - action: vote_form
  - active_loop: vote_form
  - slot_was_set:
    - vote: "-"
    - ej_api_connection_error: true
  - active_loop: null
  - action: utter_ej_communication_error
  - action: action_restart
