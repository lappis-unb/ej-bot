version: "3.1"

config:
  store_entities_as_slots: true
session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: false

intents:
  - welcome
  - stop
  - comment_confirmation
  - out_of_context
  - help
  - add_new_comment:
      ignore_entities:
      - conversation_id

entities:
  - conversation_id

slots:
  contact_name:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
  ej_api_connection_error:
    type: bool
    initial_value: false
    influence_conversation: true
    mappings:
    - type: custom
  anonymous_votes_limit:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
  auth_link:
    type: text
    initial_value: null
    influence_conversation: true
    mappings:
    - type: custom
  participant_can_add_comments:
    type: bool
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
  has_completed_registration:
    type: bool
    initial_value: null
    influence_conversation: true
    mappings:
    - type: custom
  comment_content:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
  refresh_token:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
  restart_conversation:
    type: bool
    initial_value: false
    influence_conversation: true
    mappings:
    - type: custom
  access_token:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
  conversation_id_cache:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
  conversation_id:
    type: text
    initial_value: null
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: conversation_id
  conversation_statistics:
    type: any
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
  conversation_text:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
  current_comment_id:
    type: rasa.shared.core.slots.FloatSlot
    initial_value: null
    influence_conversation: false
    max_value: 1.0
    min_value: 0.0
    mappings:
    - type: custom
  number_comments:
    type: rasa.shared.core.slots.FloatSlot
    initial_value: null
    influence_conversation: false
    max_value: 1.0
    min_value: 0.0
    mappings:
    - type: custom
  user_voted_comments:
    type: rasa.shared.core.slots.FloatSlot
    initial_value: null
    influence_conversation: false
    max_value: 1.0
    min_value: 0.0
    mappings:
    - type: custom
  check_authentication:
    type: categorical
    values: 
      - end_participant_conversation
      - check_participant_authentication
    influence_conversation: true
    mappings:
    - type: from_text
      conditions:
      - active_loop: authentication_form
        requested_slot: check_authentication
  vote:
    type: text
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
      - active_loop: vote_form
        requested_slot: vote
  comment_confirmation:
    type: categorical
    values: 
      - Sim
      - NÃ£o
    influence_conversation: true
    mappings:
    - type: from_text
      conditions:
      - active_loop: vote_form
        requested_slot: comment_confirmation
  comment:
    type: text
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
      - active_loop: vote_form
        requested_slot: comment
  help_topic:
    type: categorical
    values: 
      - help_plan
      - help_voting
      - help_know_more
      - help_authentication
      - help_lgpd
    influence_conversation: true
    mappings:
    - type: from_text
      conditions:
      - active_loop: help_form
        requested_slot: help_topic
  next_count_to_send_profile_question:
    type: text
    influence_conversation: false
    mappings:
    - type: custom
  need_to_ask_profile_question:
    type: bool
    initial_value: false
    influence_conversation: true
    mappings:
    - type: custom
  profile_question:
    type: text
    influence_conversation: true
    mappings:
    - type: from_text
      conditions:
      - active_loop: profile_form
        requested_slot: profile_question
  profile_question_id:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
  send_profile_questions:
    type: bool
    initial_value: false
    influence_conversation: false
    mappings:
    - type: custom
  votes_to_send_profile_questions:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom

responses:
  utter_bot_introduction:
  - text: |
        OlÃ¡ {contact_name}, tudo bem? Eu sou a Iara e este Ã© um espaÃ§o de escuta do MinistÃ©rio da Cultura ğŸ’¬.
        Estamos elaborando um Plano que vai guiar as polÃ­ticas culturais pelos prÃ³ximos 10 anos e queremos saber sua opiniÃ£o ğŸ“¢.
        Funciona assim: eu apresento frases sobre cultura e vocÃª me diz se concorda, discorda ou se prefere pular. Ã‰ sÃ³ clicar no botÃ£o correspondente. ğŸ‘†

        Se precisar de auxÃ­lio Ã© sÃ³ escrever ajuda que eu te apresento as opÃ§Ãµes.ğŸ†˜
  utter_show_topic_of_discussion:
  - text: |
        Ao continuar nossa conversa, vocÃª concorda com o termo de uso disponÃ­vel em: https://brasilparticipativo.presidencia.gov.br/processes/brasilparticipativo/f/78 âœ… Vamos lÃ¡?

        *{conversation_text}*
  utter_ask_comment_confirmation:
  - text: |
        Gostaria de dar sua opiniÃ£o sobre o tema para que eu possa enviÃ¡-la aos outros participantes da coleta?
    buttons:
    - title: Sim
      payload: sim
    - title: NÃ£o
      payload: nÃ£o
  utter_ask_comment:
  - text: Pode enviar seu comentÃ¡rio que eu anoto aqui!
  utter_go_back_to_voting:
  - text: Sem problemas, vou te mandar o que mais me responderam!
  utter_vote_received:
  - text: |
        Anotado âœï¸Vou te mostrar outras frases
  - text: |
        ğŸ™‚ Recebi sua opiniÃ£o! Dando sequÃªncia:
  - text: |
        ContribuiÃ§Ã£o recebida! ğŸŒŸ AvanÃ§ando para mais...
  - text: |
        âœ… Confirmado! PrÃ³xima pergunta:
  - text: |
        Resposta recebida. ğŸ“¢ AlÃ©m da enquete, estamos coletando propostas para o futuro da cultura no Brasil! VocÃª pode participar no Brasil Participativo! AvanÃ§ando:
  - text: |
        Sucesso! ğŸ‘ Mais uma pergunta:
  - text: |
        ğŸ“¦ Recebi! Mais uma questÃ£o importante:
  - text: |
        ğŸ’¡Confirmado! Suas respostas serÃ£o analisadas pelo MinistÃ©rio da Cultura para o novo Plano Nacional de Cultura. PrÃ³xima:
  - text: |
        ğŸ“‹ Anotei! Dando sequÃªncia:
  - text: |
        ğŸ“¬ OpiniÃ£o recebida com sucesso! Continuando:
  - text: |
        ğŸ“¡ Resposta acolhida! Estamos chegando ao fim. Mais uma pergunta:
  - text: |
        Confirmado! ğŸ’¡ Tem uma proposta para o futuro da cultura? Continue essa participaÃ§Ã£o no Brasil Participativo! PrÃ³xima pergunta:
  - text: |
        ğŸ“ Resposta registrada! Falta pouco! Mais uma pergunta:
  - text: |
        Sua participaÃ§Ã£o Ã© valiosa! ğŸ“Š Vamos para o prÃ³ximo tÃ³pico?
  - text: |
        ğŸ§® Feito! (sÃ­mbolo) Ãšltima pergunta:
  - text: |
        Pronto! âœ… Adiante:
  - text: |
        Sua voz foi ouvida! ğŸ™ï¸ Vamos para outro ponto?
  utter_out_of_context:
  - text: Desculpe, nÃ£o sei se entendi ğŸ˜•
  utter_sent_comment:
  - text: Certo, anotei seu comentÃ¡rio e o enviarei para outros participantes da pesquisa. Deixa eu ver se ainda tenho outras opiniÃµes pra te enviar.
  utter_send_comment_error:
  - text: Eu nÃ£o consegui salvar seu comentÃ¡rio ğŸ˜•, pois jÃ¡ existe um comentÃ¡rio com o mesmo texto.
  utter_comment_fallback:
  - text: Desculpe, nÃ£o foi possÃ­vel reconhecer o comentÃ¡rio ğŸ˜•.
  utter_voted_all_comments:
  - text: "{contact_name}, parabÃ©ns! VocÃª respondeu Ã s perguntas que tinha aqui."
  utter_thanks_participation:
  - text: |
          ParabÃ©ns, {contact_name}! VocÃª respondeu todas as minhas perguntas.
          Continue participando com a gente! Estamos coletando propostas para o futuro da cultura no Brasil. Se vocÃª tiver uma ideia ou quiser apoiar as jÃ¡ existentes, acesse o Brasil Participativo. Suas respostas e as propostas coletadas serÃ£o analisadas pelo MinC para o novo Plano Nacional de Cultura. Participe!
  utter_next_conversation:
  - text: Depois conversamos mais ğŸ˜˜
  utter_ej_communication_error:
  - text: Ops! Nossos sistemas estÃ£o passando por uma manutenÃ§Ã£o e estÃ£o temporariamente indisponÃ­veis. Estimamos que o serviÃ§o estarÃ¡ normalizado em alguns minutos. Pedimos desculpas por qualquer inconveniente.
  utter_error_try_again_later:
  - text: Tive um problema tÃ©cnico, por favor tente participar mais tarde.
  utter_ask_help_topic:
  - text: |
        OlÃ¡! Eu sou a Iara! Como posso te ajudar hoje? Escolha uma das opÃ§Ãµes a seguir:
    buttons:
    - title: â„¹ï¸ Saber mais sobre o processo
      payload: help_know_more
    - title: ğŸ¤”  Saber como as respostas serÃ£o usadas
      payload: help_voting
    - title: ğŸ“¥ Colaborar com o Plano
      payload: help_plan
    - title: ğŸ”‘ Ajuda com autenticaÃ§Ã£o
      payload: help_authentication
    - title: ğŸ›¡ï¸ SeguranÃ§a dos dados
      payload: help_lgpd
  utter_nlu_fallback:
    - text: |
          Opa, fiquei um pouco confusa com a sua mensagem. 
          Mas nÃ£o tem problema, me manda uma mensagem com o texto 'ajuda' que te envio o que eu sei sobre essa pesquisa realizada pelo MinistÃ©rio da Cultura.
  utter_explain_help_voting:
    - text: |
          ğŸ“ As respostas desta enquete serÃ£o agrupadas e analisadas pelo MinistÃ©rio da Cultura para a construÃ§Ã£o do Plano. Queremos entender o que mais importa para vocÃª! O resultado vai ser divulgado no Brasil Participativo.  Lembrando que  essa nÃ£o Ã© uma pesquisa quantitativa de opiniÃ£o. Fique ligado lÃ¡: gov.br/pncparticipativo

          Caso queira retomar a pesquisa, basta me mandar um oi.
  utter_explain_help_know_more:
    - text: |
          Esse Ã© um processo de participaÃ§Ã£o para a construÃ§Ã£o do novo Plano Nacional de Cultura. Aqui, vocÃª dÃ¡ sua opiniÃ£o sobre os principais temas do Plano ao clicar em concordar, discordar ou pular com as frases que eu apresento. Com isso, o MinistÃ©rio vai poder conhecer o que Ã© mais relevante para as pessoas e estratÃ©gico para o Plano. 

          AlÃ©m disso, vocÃª pode participar nas oficinas presenciais em todos os Estados e sugerir e votar em metas para os prÃ³ximos 10 anos da cultura no Brasil Participativo. Para saber mais e colaborar clique em: https://gov.br/pncparticipativo.

          Caso queira retomar a pesquisa, basta me mandar um oi.
  utter_explain_help_authentication:
    - text: |
          Para garantir que suas contribuiÃ§Ãµes sejam vÃ¡lidas e seguras, precisamos que vocÃª faÃ§a uma autenticaÃ§Ã£o simples. Isso ajuda a verificar sua identidade. O processo Ã© rÃ¡pido e fÃ¡cil! Entre em {auth_link} e clique em LOGIN. Coloque o seu CPF e a senha do Gov.br. Ã‰ a mesma que vocÃª usa para acessar os serviÃ§os. Depois, confirme e pronto! VocÃª jÃ¡ se autenticou e pode voltar para nossa conversa aqui.

          Caso queira retomar a pesquisa, basta me mandar um oi.
  utter_explain_help_lgpd:
    - text: |
          Todas as informaÃ§Ãµes coletadas sÃ£o armazenadas de forma segura e utilizadas para o desenvolvimento e mobilizaÃ§Ã£o do novo Plano Nacional de Cultura. NÃ³s nos comprometemos a tratar esses dados de forma conjunta e nÃ£o divulgÃ¡-los para terceiros.
          Para saber mais, clique em: https://brasilparticipativo.presidencia.gov.br/processes/brasilparticipativo/f/78

          Caso queira retomar a pesquisa, basta me mandar um oi.
  utter_explain_help_plan:
    - text: |
          AlÃ©m dessa enquete, vocÃª tem outras formas de colaborar com o Plano: acesse o Brasil Participativo, sugira e vote em metas para o futuro da cultura no Brasil. VocÃª tambÃ©m pode participar de oficinas presenciais e colaborar com o texto base. Para saber mais e participar clique em: https://gov.br/pncparticipativo.

          Caso queira retomar a pesquisa, basta me mandar um oi.
  utter_advise_participant_to_join_again:
  - text: "NÃ£o consegui salvar o seu voto. Clique no link de participaÃ§Ã£o novamente, para retomarmos nossa conversa.\n"
  utter_invalid_vote_during_participation:
  - text: | 
        VocÃª ainda estÃ¡ participando da conversa *{conversation_text}* e a sua resposta no comentÃ¡rio *{comment_content}* nÃ£o foi vÃ¡lida. Poderia responder novamente? 

        Caso esteja com problemas, vocÃª pode parar essas conversa e em seguida me pedir ajuda!

        Vou te reenviar o comentÃ¡rio dessa pesquisa.
  utter_vote_limit_anonymous_reached:
  - text: |
        VocÃª estÃ¡ indo muito bem, {contact_name}!
        Para poder continuar votando por aqui e receber relatÃ³rios exclusivos do Brasil Participativo, autentique-se agora e aproveite!
        LÃ¡ vocÃª tambÃ©m pode votar nas frases que vocÃª pulou por aqui.
  utter_get_token:
  - text: |
        Aqui estÃ¡ o link para se autenticar:

        {auth_link}
  utter_awaiting_authentication:
  - text: "Estou aguardando vocÃª se autenticar para continuar a votaÃ§Ã£o. ğŸ˜Š"
  utter_authenticated:
  - text: "Muito obrigado! Validei sua autenticaÃ§Ã£o, podemos continuar."
  utter_error_during_authentication_validation:
  - text: "NÃ£o consegui identificar que vocÃª se autenticou. Poderia tentar novamente?"
  utter_profile_intro:
  - text: Para personalizar essa experiÃªncia, gostarÃ­amos de saber um pouquinho mais sobre vocÃª. Tudo bem?
  utter_profile_received:
  - text: Obrigada por responder! ğŸ˜Š
  - text: Anotado! ğŸ˜Š
  - text: Recebido! ğŸ˜Š
  - text: Anotei! ğŸ˜Š
  utter_profile_fallback:
  - text: Desculpe, nÃ£o consegui entender o que vocÃª disse. Clique em uma das opÃ§Ãµes para que eu entenda melhor.
  utter_return_from_help:
  - text: OlÃ¡, {contact_name} vamos continuar a enquete? Estamos ouvindo diferentes pessoas para saber o que elas pensam sobre cultura. ğŸ¯

actions:
- action_reset_help_slots
- action_ask_vote
- validate_vote_form
- action_ask_profile_question
- validate_profile_form
- action_get_conversation
- action_set_new_comment
- action_customized_fallback
- action_ask_check_authentication
- validate_authentication_form
- validate_help_form

forms:
  help_form:
    required_slots:
      - help_topic
    ignored_intents:
      - stop
      - check_authentication
  authentication_form:
    ignored_intents:
      - stop
    required_slots:
      - check_authentication
      - has_completed_registration
  vote_form:
    ignored_intents:
      - stop
      - check_authentication
      - help
    required_slots:
      - vote
      - comment_confirmation
      - comment
  profile_form:
    required_slots:
      - profile_question

e2e_actions: []
