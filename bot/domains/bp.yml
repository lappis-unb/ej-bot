version: "3.1"

config:
  store_entities_as_slots: true
session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: false

intents:
  - stop
  - comment_confirmation
  - out_of_context
  - help
  - start_with_conversation_id:
      use_entities: true
  - add_new_comment:
      ignore_entities:
      - conversation_id

entities:
  - conversation_id

slots:
  contact_name:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
  ej_api_connection_error:
    type: bool
    initial_value: false
    influence_conversation: true
    mappings:
    - type: custom
  anonymous_votes_limit:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
  auth_link:
    type: text
    initial_value: null
    influence_conversation: true
    mappings:
    - type: custom
  participant_can_add_comments:
    type: bool
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
  has_completed_registration:
    type: bool
    initial_value: null
    influence_conversation: true
    mappings:
    - type: custom
  comment_content:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
  refresh_token:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
  restart_conversation:
    type: bool
    initial_value: false
    influence_conversation: true
    mappings:
    - type: custom
  access_token:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
  conversation_id_cache:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
  conversation_id:
    type: text
    initial_value: null
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: conversation_id
  conversation_statistics:
    type: any
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
  conversation_text:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
  current_comment_id:
    type: rasa.shared.core.slots.FloatSlot
    initial_value: null
    influence_conversation: false
    max_value: 1.0
    min_value: 0.0
    mappings:
    - type: custom
  number_comments:
    type: rasa.shared.core.slots.FloatSlot
    initial_value: null
    influence_conversation: false
    max_value: 1.0
    min_value: 0.0
    mappings:
    - type: custom
  user_voted_comments:
    type: rasa.shared.core.slots.FloatSlot
    initial_value: null
    influence_conversation: false
    max_value: 1.0
    min_value: 0.0
    mappings:
    - type: custom
  check_authentication:
    type: categorical
    values: 
      - end_participant_conversation
      - check_participant_authentication
    influence_conversation: true
    mappings:
    - type: from_text
      conditions:
      - active_loop: authentication_form
        requested_slot: check_authentication
  vote:
    type: text
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
      - active_loop: vote_form
        requested_slot: vote
  comment_confirmation:
    type: categorical
    values: 
      - Sim
      - N√£o
    influence_conversation: true
    mappings:
    - type: from_text
      conditions:
      - active_loop: vote_form
        requested_slot: comment_confirmation
  comment:
    type: text
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
      - active_loop: vote_form
        requested_slot: comment
  help_topic:
    type: categorical
    values: 
      - help_voting
      - help_know_more
      - help_authentication
      - help_lgpd
    influence_conversation: true
    mappings:
    - type: from_text
      conditions:
      - active_loop: help_form
        requested_slot: help_topic

responses:
  utter_bot_introduction:
  - text: |
        Ol√°! Eu sou a *Iara* e este √© um espa√ßo de escuta do *Minist√©rio da Cultura* üí¨.
        Estamos elaborando um Plano que vai guiar as pol√≠ticas culturais pelos pr√≥ximos 10 anos e *queremos saber sua opini√£o* üì¢.
        Ao continuar essa conversa, voc√™ concorda com o nosso termo de uso. N√≥s nos comprometemos a tratar esses dados de forma conjunta e n√£o divulg√°-los para terceiros.
        https://brasilparticipativo.presidencia.gov.br/processes/brasilparticipativo/f/78
  utter_show_topic_of_discussion:
  - text: |
        Muito prazer, {contact_name}. *Estamos ouvindo diferentes pessoas para saber o que elas pensam sobre cultura.* üéØ
        Funciona assim: eu apresento uma s√©rie de frases com opini√µes diversas e voc√™ me diz se concorda, discorda ou se prefere pular. √â s√≥ clicar no bot√£o correspondente. Ah, mas antes, vale uma observa√ß√£o: essas frases s√£o com base em opini√µes p√∫blicas e n√£o necessariamente representam uma posi√ß√£o oficial do Minist√©rio da Cultura. Pronto para come√ßar?

        Se precisar de ajuda durante a sua participa√ß√£o, √© s√≥ escrever *ajuda*. Caso queira encerrar sua participa√ß√£o, pode me pedir para *parar*. Vamos l√°!

        *{conversation_text}*
  utter_ask_comment_confirmation:
  - text: |
      Gostaria de dar sua opini√£o sobre o tema para que eu possa envi√°-la aos outros participantes da coleta?
    buttons:
    - title: Sim
      payload: sim
    - title: N√£o
      payload: n√£o
  utter_ask_comment:
  - text: Pode enviar seu coment√°rio que eu anoto aqui!
  utter_go_back_to_voting:
  - text: Sem problemas, vou te mandar o que mais me responderam!
  utter_vote_received:
  - text: Recebi sua opini√£o! üôÇMuito obrigada por participar. Dando sequ√™ncia, voc√™ acha que..
  - text: Anotado ‚úçÔ∏èVou te mostrar outras frases
  - text: Registrado. Recebi sua opini√£o!üôÇ Muito obrigada por participar. Dando sequ√™ncia, voc√™ acha que...
  utter_out_of_context:
  - text: Desculpe, n√£o sei se entendi üòï
  utter_sent_comment:
  - text: Certo, anotei seu coment√°rio e o enviarei para outros participantes da pesquisa. Deixa eu ver se ainda tenho outras opini√µes pra te enviar.
  utter_send_comment_error:
  - text: Eu n√£o consegui salvar seu coment√°rio üòï, pois j√° existe um coment√°rio com o mesmo texto.
  utter_comment_fallback:
  - text: Desculpe, n√£o foi poss√≠vel reconhecer o coment√°rio üòï.
  utter_voted_all_comments:
  - text: "{contact_name}, parab√©ns! Voc√™ respondeu √†s perguntas que tinha aqui."
  utter_thanks_participation:
  - text: "Voc√™ tem alguma sugest√£o para o novo Plano Nacional de Cultura? Estamos ouvindo o que a popula√ß√£o deseja como metas para os pr√≥ximos 10 anos da pol√≠tica cultural. Acesse o Brasil Participativo e envie sua proposta. Sua voz √© essencial."
  utter_next_conversation:
  - text: Depois conversamos mais üòò
  utter_ej_communication_error:
  - text: Ops! Nossos sistemas est√£o passando por uma manuten√ß√£o e est√£o temporariamente indispon√≠veis. Estimamos que o servi√ßo estar√° normalizado em alguns minutos. Pedimos desculpas por qualquer inconveniente.
  utter_error_try_again_later:
  - text: Tive um problema t√©cnico, por favor tente participar mais tarde.
  utter_ask_help_topic:
  - text: "Ol√°! Eu sou a Iara! Como posso te ajudar hoje? Escolha uma das op√ß√µes a seguir:"
    buttons:
    - title: Votar em propostas
      payload: help_voting
    - title: Sobre o processo
      payload: help_know_more
    - title: Ajuda com autentica√ß√£o
      payload: help_authentication
    - title: Seguran√ßa dos dados
      payload: help_lgpd
  utter_nlu_fallback:
    - text: |
          Opa, fiquei um pouco confusa com a sua mensagem. 
          Mas n√£o tem problema, me manda uma mensagem com o texto 'ajuda' que te envio o que eu sei sobre essa pesquisa realizada pelo Minist√©rio da Cultura.
  utter_explain_help_voting:
    - text: |
          Nessa conversa, voc√™ ver√° frases que dialogam diretamente com os conte√∫dos do Plano Nacional de Cultura. Voc√™ pode concordar, discordar ou pular cada uma delas, conforme sua opini√£o. Para isso, √© s√≥ clicar nos bot√µes correspondentes.
  utter_explain_help_know_more:
    - text: |
          O Plano Nacional de Cultura √© um instrumento fundamental para o planejamento das pol√≠ticas culturais do Brasil. O processo de constru√ß√£o do novo Plano Nacional de Cultura √© colaborativo e conta com a participa√ß√£o de pessoas como voc√™. Aqui, em oficinas e no Brasil Participativo, estamos coletando ideias e propostas para os pr√≥ximos 10 anos da cultura no Brasil. Sua voz √© fundamental para moldar um futuro cultural mais inclusivo e vibrante!
  utter_explain_help_authentication:
    - text: |
          Para garantir que suas contribui√ß√µes sejam v√°lidas e seguras, precisamos que voc√™ fa√ßa uma autentica√ß√£o simples.  Isso ajuda a verificar sua identidade. O processo √© r√°pido e f√°cil! Voc√™ vai receber um link para acessar o Brasil Participativo e pode fazer o login com o seu gov.br. Se precisar de ajuda, estou aqui para orientar voc√™.
  utter_explain_help_lgpd:
    - text: |
          A seguran√ßa dos seus dados √© nossa prioridade. Todas as informa√ß√µes coletadas s√£o armazenadas de forma segura e utilizadas para o desenvolvimento e mobiliza√ß√£o do novo Plano Nacional de Cultura. Seguimos rigorosamente as normas de prote√ß√£o de dados para garantir que sua privacidade seja preservada.
  utter_no_selected_conversation:
  - text: Nenhuma conversa foi selecionada. Voc√™ deve utilizar o comando de sele√ß√£o de conversa ou participar de alguma que algu√©m j√° criou.
  utter_advise_participant_to_join_again:
  - text: "N√£o consegui salvar o seu voto. Clique no link de participa√ß√£o novamente, para retomarmos nossa conversa.\n"
  utter_invalid_vote_during_participation:
  - text: | 
        Voc√™ ainda est√° participando da conversa *{conversation_text}* e a sua resposta no coment√°rio *{comment_content}* n√£o foi v√°lida. Poderia responder novamente? 

        Caso esteja com problemas, voc√™ pode parar essas conversa e em seguida me pedir ajuda!

        Vou te reenviar o coment√°rio dessa pesquisa.
  utter_vote_limit_anonymous_reached:
  - text: "Voc√™ est√° indo muito bem, {contact_name}!\n\nPara poder continuar votando por aqui e receber relat√≥rios exclusivos do Brasil Participativo, autentique-se agora e aproveite! L√° voc√™ tamb√©m pode votar nas frases que voc√™ pulou por aqui."
  utter_get_token:
  - text: "Aqui est√° o link para se autenticar.\n\n{auth_link}"
  utter_awaiting_authentication:
  - text: "Estou aguardando voc√™ se autenticar para continuar a vota√ß√£o. üòä"
  utter_authenticated:
  - text: "Muito obrigado! Validei sua autentica√ß√£o, podemos continuar."
  utter_error_during_authentication_validation:
  - text: "N√£o consegui identificar que voc√™ se autenticou. Poderia tentar novamente?"


actions:
- action_reset_help_slots
- action_ask_vote
- validate_vote_form
- action_get_conversation
- action_set_new_comment
- action_customized_fallback
- action_ask_check_authentication
- validate_authentication_form

forms:
  help_form:
    required_slots:
      - help_topic
  authentication_form:
    ignored_intents:
      - stop
      - start_with_conversation_id
    required_slots:
      - check_authentication
      - has_completed_registration
  vote_form:
    ignored_intents:
      - stop
      - check_authentication
    required_slots:
      - vote
      - comment_confirmation
      - comment
e2e_actions: []
