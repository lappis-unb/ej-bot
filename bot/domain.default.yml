version: "2.0"
config:
  store_entities_as_slots: true
session_config:
  session_expiration_time: 5
  carry_over_slots_to_new_session: true
intents:
  - agree:
      use_entities: true
  - disagree:
      use_entities: true
  - pass:
      use_entities: true
  - out_of_context:
      use_entities: true
  - stop:
      use_entities: true
  - welcome:
      use_entities: true
  - url:
      use_entities: true
  - help:
      use_entities: true
  - start_with_conversation_id:
      use_entities: true
  - add_new_comment:
      ignore_entities:
        - conversation_id
entities:
  - url
  - current_channel_info
  - conversation_id
slots:
  comment_text:
    type: rasa.shared.core.slots.TextSlot
    initial_value: null
    auto_fill: true
    influence_conversation: false
  ej_user_token:
    type: rasa.shared.core.slots.TextSlot
    initial_value: null
    auto_fill: true
    influence_conversation: false
  # conversation_id_cache is necessary because add_new_comment intent can have numbers and 
  # trigger and auto_fill for conversation_id. Using conversation_id_cache we avoid this behavior.
  # https://github.com/RasaHQ/rasa/issues/5561
  conversation_id_cache:
    type: rasa.shared.core.slots.TextSlot
    initial_value: null
    auto_fill: false
    influence_conversation: false
  conversation_id:
    type: rasa.shared.core.slots.TextSlot
    initial_value: null
    auto_fill: true
    influence_conversation: true
  conversation_text:
    type: rasa.shared.core.slots.TextSlot
    initial_value: null
    auto_fill: false
    influence_conversation: false
  current_comment_id:
    type: rasa.shared.core.slots.FloatSlot
    initial_value: null
    auto_fill: true
    influence_conversation: false
    max_value: 1.0
    min_value: 0.0
  number_comments:
    type: rasa.shared.core.slots.FloatSlot
    initial_value: null
    auto_fill: true
    influence_conversation: false
    max_value: 1.0
    min_value: 0.0
  number_voted_comments:
    type: rasa.shared.core.slots.FloatSlot
    initial_value: null
    auto_fill: true
    influence_conversation: false
    max_value: 1.0
    min_value: 0.0
  vote:
    type: rasa.shared.core.slots.CategoricalSlot
    initial_value: null
    auto_fill: true
    influence_conversation: false
    values:
      - concordar
      - discordar
      - pular
      - parar
      - novo link de participa√ß√£o
  current_channel_info:
    type: rasa.shared.core.slots.TextSlot
    initial_value: null
    auto_fill: true
    influence_conversation: true
  url:
    type: rasa.shared.core.slots.TextSlot
    initial_value: null
    auto_fill: true
    influence_conversation: false
  bot_telegram_username:
    type: rasa.shared.core.slots.TextSlot
    initial_value: null
    auto_fill: false
    influence_conversation: false
  bot_whatsapp_number:
    type: rasa.shared.core.slots.TextSlot
    initial_value: null
    auto_fill: false
    influence_conversation: false  
responses:
  utter_introduce_ej:
    - text: >
        Ol√°, Eu sou a Duda, a assistente virtual da Plataforma Empurrando Juntas.
        Meu trabalho √© descobrir a opini√£o das pessoas sobre determinados temas e para isso eu preciso da sua ajuda. 
        A suas opini√µes ser√£o enviadas para a nossa plataforma, conforme o nosso termo de uso https://www.ejparticipe.org/usage/.
  utter_show_topic_of_discussion:
    - text: |
        Eu perguntei para algumas pessoas o que elas acham sobre o seguinte assunto:
        *{conversation_text}*

        Vou te mandar o que me responderam e gostaria da sua opini√£o:
      channel: "twilio"

    - text: >
        Eu perguntei para algumas pessoas o que elas acham sobre o seguinte assunto:
        **{conversation_text}**

        Vou te mandar o que me responderam e gostaria da sua opini√£o:
      channel: "socketio"
      
    - text: |
        Eu perguntei para algumas pessoas o que elas acham sobre o seguinte assunto:
        {conversation_text}

        Vou te mandar o que me responderam e gostaria da sua opini√£o:
  utter_ask_if_wants_to_add_comment:
    - text: Gostaria de dar sua opini√£o sobre o tema para que eu possa envi√°-la aos outros participantes da coleta?
      buttons:
        - title: "Sim"
          payload: "sim"
        - title: "N√£o"
          payload: "n√£o"
  utter_ask_user_comment:
    - text: Pode enviar seu coment√°rio que eu anoto aqui!

  utter_go_back_to_voting:
    - text: Sem problemas, vou te mandar o que mais me responderam!

  utter_user_want_anonymous:
    - text: Beleza, vamos prosseguir!
  utter_vote_received:
    - text: Anotado!
    - text: Anotei aqui.
    - text: Entendo, registrado.
  utter_out_of_context:
    - text: Desculpe, n√£o sei se entendi üòï
  utter_sent_comment:
    - text: Certo, anotei seu coment√°rio e o enviarei para outros participantes da pesquisa. Deixa eu ver se ainda tenho outras opini√µes pra te enviar.
  utter_send_comment_error:
    - text: Eu n√£o consegui salvar seu coment√°rio üòï, pois j√° existe um coment√°rio com o mesmo texto.
  utter_comment_fallback:
    - text: Desculpe, n√£o foi poss√≠vel reconhecer o coment√°rio üòï.
  utter_ask_send_comment_again:
    - text: Faz assim, tenta me mandar ele novamente mais tarde, pode ser?!
  utter_voted_all_comments:
    - text: Nossa üòÆüòÆüòÆ Voc√™ j√° opinou sobre todos os coment√°rios que eu tinha aqui!
  utter_thanks_participation:
    - text: Sua partici√ß√£o ir√° nos ajudar a entender o que as pessoas pensam sobre esse assunto, muito obrigado ü§óü§óü§ó!!
  utter_stopped:
    - text: S√≥ de voc√™ ter respondido ja me ajudou, muito obrigada!
  utter_stopped_after_disagreed:
    - text: Mas s√≥ de voc√™ ter me respondido j√° me ajudou. Muito obrigada! üòò
  utter_next_conversation:
    - text: Depois conversamos mais üòò
  utter_finish:
    - text: Ah quando quiser trocar uma ideia √© s√≥ me mandar um "Oi".
  utter_goodbye:
    - text: Pode deixar que te mantenho por dentro sobre as novidades sobre esse assunto
  utter_ej_communication_error:
    - text: Opa, parece que n√£o estou conseguindo acessar nosso servidor.
  utter_error_try_again_later:
    - text: Tive um problema t√©cnico, por favor tente participar mais tarde.
  utter_ej_connection_doesnt_exist:
    - text: Esse site ainda n√£o est√° conectado com a EJ. Entre em contato com os administradores dele.
  utter_help:
    - text: Ol√°, muito prazer, eu sou a Duda! Eu sou a assistente virtual da plataforma EJ.  Comigo voc√™ pode fazer coletas de opini√£o ou participar de uma. Para come√ßarmos, voc√™ precisa gerar o link de participa√ß√£o na plataforma https://www.ejplataform.org. Para mais informa√ß√µes, acesse nossa documenta√ß√£o em https://www.ejplatform.org/static_docs/i18n/pt-br/user-docs/tools-chatbot.html#duda-o-chatbot-oficial-da-ej
  utter_no_selected_conversation:
    - text: Nenhuma conversa foi selecionada. Voc√™ deve utilizar o comando de sele√ß√£o de conversa ou participar de alguma que algu√©m j√° criou.

  utter_advise_participant_to_join_again:
    - text: >
        N√£o consegui salvar o seu voto. Clique no link de participa√ß√£o novamente, para retomarmos nossa conversa.

actions:
  - action_ask_vote
  - action_follow_up_form
  - validate_vote_form
  - action_setup_conversation
  - action_set_channel_info
  - action_set_new_comment
  - action_customized_fallback

forms:
  vote_form:
    vote:
      - type: from_text
e2e_actions: []
